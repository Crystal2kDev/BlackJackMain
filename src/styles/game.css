/* src/styles/Game.css */

/* Базовые обёртки */
.game {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: calc(100vh - 64px);
  padding: 2rem 1rem;
  box-sizing: border-box;
  color: #e6eef6;
  font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}

/* Ограничитель ширины (центрирование контента) */
.game-table-wrapper {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  position: relative;
}

/* Ошибки/уведомления */
.game-error {
  position: absolute;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(180deg,#b91c1c,#ef4444);
  color: white;
  padding: 10px 16px;
  border-radius: 8px;
  z-index: 1200;
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
}

/* Результат в углу */
.game-result {
  position: fixed;
  top: 20px;
  right: 20px;
  background: linear-gradient(180deg,#0ea5b7,#0077b6);
  color: white;
  padding: 14px 18px;
  border-radius: 8px;
  z-index: 1300;
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
}

/* Полукруглый стол с зелёным центром и коричневыми краями */
.game-table {
  position: relative;
  width: 100%;
  height: 640px;
  display: block;
  overflow: visible;
  margin-top: 20px;
  padding-bottom: 120px; /* чтобы controls не наезжали на игроков */
}

/* Зелёный центр + коричневые края */
.table-oval {
  position: relative;
  width: 100%;
  max-width: 1150px;
  height: 560px;
  margin: 0 auto;
  border-radius: 50% / 20%;
  box-shadow: inset 0 -24px 60px rgba(0,0,0,0.6), 0 18px 60px rgba(0,0,0,0.6);
  overflow: visible;
}
.table-oval::after {
  content: "";
  position: absolute;
  inset: -8px;
  border-radius: 52% / 22%;
  background:
    radial-gradient(1100px 400px at 50% 28%, rgba(16, 250, 94, 0.06), rgba(255,255,255,0) 40%),
    radial-gradient(650px 260px at 50% 26%, #2e8b57 0%, #1f6f3f 45%, #0f4f2e 100%);
  box-shadow: inset 0 0 0 4px rgba(0,0,0,.25);
  z-index: 11;
  pointer-events: none;
}
.table-oval::before {
  content: "";
  position: absolute;
  inset: -22px;
  border-radius: 55% / 24%;
  background: linear-gradient(180deg,#bd7b46,#92572c), radial-gradient(600px 200px at 50% 40%, rgba(255,255,255,.06), rgba(0,0,0,0) 60%);
  box-shadow: inset 0 6px 22px rgba(255,255,255,.03), 0 22px 50px rgba(0,0,0,.7);
  z-index: 10;
  pointer-events: none;
}

/* Shoe */
.shoe {
  position: absolute;
  top: 80px; /* Опускаем башмак ниже */
  left: 50%;
  transform: translateX(-50%);
  z-index: 30;
  pointer-events: none;
  filter: drop-shadow(0 8px 16px rgba(0,0,0,0.4));
}

/* Dealer avatar */
.dealer-avatar-wrapper {
  position: absolute;
  top: 8px; /* Приподнимаем дилера */
  left: 50%;
  transform: translateX(-50%);
  z-index: 40;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 140px;
  height: 140px;
  pointer-events: none;
}
.dealer-avatar {
  width: 110px;
  height: auto;
  display: block;
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
  box-shadow: 0 8px 20px rgba(0,0,0,0.5), 0 1px 0 rgba(255,255,255,0.02) inset;
  transition: transform 300ms ease, box-shadow 300ms ease, filter 300ms ease;
  transform-origin: center;
  z-index: 50;
}

/* Dealer area */
.dealer-area {
  position: absolute;
  top: 180px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 35;
  width: 100%;
  max-width: 720px;
  text-align: center;
  pointer-events: none;
}
.dealer-area h3 {
  margin: 0 0 8px 0;
  color: #dbeafe;
  font-size: 1.05rem;
  font-weight: 700;
  letter-spacing: 0.2px;
  text-shadow: 0 3px 8px rgba(0,0,0,0.6);
}

/* Row of dealer cards */
.cards-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px; /* Зазор между картами */
  margin-top: 8px; /* Небольшой отступ для карт игрока */
  pointer-events: none;
  height: 120px; /* Уменьшена высота для новых размеров карт */
  min-width: 240px; /* Минимальная ширина для предотвращения наложения */
}

/* Card styling */
.game-card {
  width: 72px; /* Новый размер карт */
  height: 108px;
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(2,6,12,0.6);
  transition: transform 280ms cubic-bezier(.2,.9,.3,1), box-shadow 280ms cubic-bezier(.2,.9,.3,1);
  transform-origin: center bottom;
  user-select: none;
  -webkit-user-drag: none;
  position: relative;
}
@media (hover: hover) {
  .game-card:hover {
    transform: translateY(-6px) rotate(-1deg);
    box-shadow: 0 14px 36px rgba(0,0,0,0.65);
  }
}

/* Card flip wrappers */
.card-flip-wrapper {
  position: relative;
  width: 72px; /* Синхронизировано с .game-card */
  height: 108px;
  perspective: 900px;
  display: inline-block;
}
.card-flip-container {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
}
.card-flip-container .game-card {
  position: absolute;
  left: 0;
  top: 0;
  backface-visibility: hidden;
  transform-origin: center;
}
.card-front {
  transform: rotateY(-180deg);
}
.card-back {
  transform: rotateY(0deg);
}

/* Игроки вдоль краев стола */
.seats-layer {
  position: absolute;
  inset: 0;
  z-index: 30;
  pointer-events: none;
}

/* Общая карта игрока */
.player-area {
  position: absolute;
  width: 140px; /* Уменьшена ширина для 7 игроков */
  text-align: center;
  pointer-events: auto;
  transition: transform 220ms ease, box-shadow 220ms ease, filter 220ms ease;
}

/* Позиции игроков: 1 и 2 — по бокам (середина), 3–7 — по нижнему краю */
.seat-1 { left: -2%; top: 280px; transform: translateX(0%); } /* Ещё ближе к левому краю */
.seat-2 { right: -2%; top: 280px; transform: translateX(0%); } /* Ещё ближе к правому краю */
.seat-3 { left: 2%; bottom: 0; transform: translateX(0%); } /* Нижний край, ближе к левому */
.seat-4 { left: 20%; bottom: 0; transform: translateX(0%); }
.seat-5 { left: 38%; bottom: 0; transform: translateX(0%); }
.seat-6 { left: 56%; bottom: 0; transform: translateX(0%); }
.seat-7 { left: 74%; bottom: 0; transform: translateX(0%); } /* Ближе к правому краю */

/* Адаптив: когда игроков много — компактнее */
.seats-compact .player-area {
  width: 110px;
}
.seats-compact .game-card {
  width: 62px;
  height: 93px;
}
.seats-compact .player-avatar {
  width: 48px;
  height: 48px;
}
.seats-compact .card-flip-wrapper {
  width: 62px;
  height: 93px;
}

/* player avatar + name row */
.player-top {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  margin-bottom: 6px;
  pointer-events: none;
}
.player-name-row {
  display: flex;
  gap: 6px;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  flex-wrap: wrap;
}
.player-name {
  font-weight: 800;
  color: #eaf6ff;
}
.player-shortid {
  font-family: monospace;
  color: #9fb6c6;
  font-weight: 700;
}
.player-points {
  font-weight: 700;
  color: #d1e8f5;
  font-size: 0.9rem;
}

/* stats row: фишки / ставка — компактные бейджи рядом с ником */
.player-stats-row {
  display: flex;
  gap: 6px;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  pointer-events: none;
}
.stat-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 0.82rem;
  font-weight: 800;
  letter-spacing: 0.1px;
  box-shadow: 0 6px 14px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.05);
  color: #dbeafe;
}
.stat-badge.chips {
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
}
.stat-badge.bet {
  background: linear-gradient(180deg, rgba(14,165,183,0.25), rgba(14,165,183,0.05));
}

/* avatar */
.player-avatar {
  width: 64px;
  height: 64px;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
  box-shadow: 0 8px 22px rgba(0,0,0,0.5);
  transition: transform 220ms ease, box-shadow 220ms ease, filter 220ms ease;
  position: relative;
}

/* active player highlight */
.player-area.player-active {
  transform: translateY(-6px);
  z-index: 80;
  filter: saturate(1.04);
}
.player-area.player-active .player-avatar {
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 18px 40px rgba(6,120,255,0.22), 0 6px 16px rgba(0,0,0,0.5);
  border: 1px solid rgba(10,130,255,0.10);
}
.player-area.player-active .player-avatar::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 110%;
  height: 110%;
  border-radius: 14px;
  pointer-events: none;
  box-shadow: 0 0 20px rgba(6,120,255,0.18);
  animation: pulse-ring 1.6s infinite ease-in-out;
  z-index: -1;
}

/* badgelike "Ход" */
.your-turn-badge {
  display: inline-block;
  background: linear-gradient(90deg,#0ea5e9,#0ea5b7);
  color: #021223;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 0.72rem;
  margin-left: 2px;
  box-shadow: 0 8px 20px rgba(10,130,255,0.14);
  align-self: center;
  pointer-events: none;
}

/* Player bet area (loader + controls under each player) */
.player-bet-area {
  margin-top: 6px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}
.player-bet-controls {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: center;
}

/* small inline bet button for per-player UI */
.bet-button.small, .game-button.small {
  padding: 6px 8px;
  font-size: 0.88rem;
  border-radius: 8px;
}
.bet-buttons-inline {
  display: flex;
  gap: 6px;
  align-items: center;
}

/* timer bar under player */
.player-bet-timer {
  width: 100%;
  height: 8px;
  background: rgba(255,255,255,0.03);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}
.player-bet-timer-bar {
  height: 100%;
  background: linear-gradient(90deg,#00b7eb,#0077b6);
  transition: width 0.12s linear;
}

/* waiting placeholder */
.player-bet-wait {
  color: #b9dbe6;
  font-weight: 700;
}

/* static small placeholder when nobody is betting */
.player-bet-static {
  color: #9fb6c6;
}

/* Controls centered under table */
.game-controls {
  position: absolute;
  left: 50%;
  bottom: 14px;
  transform: translateX(-50%);
  z-index: 60;
  display: flex;
  gap: 12px;
  align-items: center;
  pointer-events: auto;
  flex-wrap: wrap;
}

/* wide main start button */
.game-button.large {
  padding: 12px 20px;
  font-size: 1rem;
  font-weight: 800;
  border-radius: 12px;
}

/* Quick bets (small inline) */
.quick-bets {
  display: flex;
  gap: 10px;
  align-items: center;
}

/* Стили кнопок ставок и управления */
.bet-button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  font-weight: 700;
  background: linear-gradient(180deg,#0ea5b7,#0077b6);
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: transform 180ms ease, box-shadow 180ms ease, filter 180ms ease;
  box-shadow: 0 8px 20px rgba(0,0,0,0.45);
}
.game-button {
  padding: 10px 14px;
  background: linear-gradient(180deg,#1f2937,#111827);
  color: #e6eef6;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  box-shadow: 0 6px 16px rgba(0,0,0,0.45);
  transition: transform 180ms ease, box-shadow 180ms ease;
}

.bet-button:disabled, .game-button:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  filter: grayscale(0.35);
}
.bet-button:hover:not(:disabled), .game-button:hover:not(:disabled) {
  transform: translateY(-4px);
  box-shadow: 0 14px 36px rgba(0,0,0,0.5);
}

/* chip icons */
.chip-btn-icon {
  width: 22px;
  height: 22px;
  object-fit: contain;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.45));
  transition: transform 220ms ease, filter 220ms ease;
}

/* Адаптивы */
@media (max-width: 1100px) {
  .player-area {
    width: 120px;
  }
  .game-card {
    width: 66px;
    height: 99px;
  }
  .card-flip-wrapper {
    width: 66px;
    height: 99px;
  }
}
@media (max-width: 880px) {
  .player-area {
    width: 100px;
  }
  .game-card {
    width: 58px;
    height: 87px;
  }
  .card-flip-wrapper {
    width: 58px;
    height: 87px;
  }
  .game-table {
    height: 580px;
    padding-bottom: 140px;
  }
}
@media (max-width: 540px) {
  .player-area {
    width: 90px;
  }
  .player-avatar {
    width: 44px;
    height: 44px;
  }
  .game-card {
    width: 52px;
    height: 78px;
  }
  .card-flip-wrapper {
    width: 52px;
    height: 78px;
  }
  .bet-button {
    padding: 6px 8px;
  }
}

@keyframes pulse-ring {
  0% { box-shadow: 0 0 0 0 rgba(6,120,255,0.18); }
  70% { box-shadow: 0 0 0 10px rgba(6,120,255,0.0); }
  100% { box-shadow: 0 0 0 0 rgba(6,120,255,0.0); }
}

/* Blackjack overlay */
.blackjack-overlay {
  position: fixed;
  inset: 0;
  z-index: 1500;
  display: grid;
  place-items: center;
  pointer-events: none;
  background: radial-gradient(60% 50% at 50% 40%, rgba(255,255,255,0.06), rgba(0,0,0,0.0) 60%);
  animation: bj-fade-bg 2.2s ease forwards;
}
@keyframes bj-fade-bg {
  0% { background-color: rgba(0,0,0,0.0); }
  10% { background-color: rgba(0,0,0,0.18); }
  90% { background-color: rgba(0,0,0,0.18); }
  100% { background-color: rgba(0,0,0,0.0); }
}
.blackjack-banner {
  position: relative;
  padding: 22px 28px;
  border-radius: 16px;
  text-align: center;
  background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.06));
  box-shadow: 0 18px 60px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.12);
  overflow: hidden;
  backdrop-filter: blur(2px);
}
.blackjack-banner::before {
  content: "";
  position: absolute;
  left: -40%;
  top: -20%;
  width: 180%;
  height: 60%;
  background: linear-gradient(100deg, rgba(255,255,255,0.22), rgba(255,255,255,0.06) 40%, rgba(255,255,255,0.0) 60%);
  transform: rotate(-8deg);
  filter: blur(10px);
  animation: bj-shine 2.1s ease-in-out forwards;
}
@keyframes bj-shine {
  0% { transform: translateX(-30%) rotate(-8deg); opacity: 0.0; }
  20% { opacity: 1; }
  60% { transform: translateX(20%) rotate(-8deg); opacity: 1; }
  100% { transform: translateX(60%) rotate(-8deg); opacity: 0; }
}
.blackjack-title {
  display: block;
  font-size: 2.2rem;
  font-weight: 900;
  letter-spacing: 2px;
  line-height: 1.1;
  background: linear-gradient(90deg, #ffffff, #9ee7ff, #43c8ff);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 8px 30px rgba(14,165,183,0.35);
}
.blackjack-sub {
  display: block;
  margin-top: 6px;
  font-size: 0.95rem;
  font-weight: 800;
  color: #e6fbff;
  opacity: 0.95;
  text-shadow: 0 6px 16px rgba(0,0,0,0.45);
}
.blackjack-sparkles::before, .blackjack-sparkles::after {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(4px 4px at 10% 20%, rgba(255,255,255,0.9), rgba(255,255,255,0) 70%),
    radial-gradient(3px 3px at 80% 10%, rgba(166,244,255,0.9), rgba(255,255,255,0) 70%),
    radial-gradient(3px 3px at 40% 80%, rgba(157,255,215,0.9), rgba(255,255,255,0) 70%),
    radial-gradient(4px 4px at 70% 60%, rgba(255,255,255,0.95), rgba(255,255,255,0) 70%);
  filter: blur(0.2px);
  animation: bj-sparkle 1.8s ease-in-out infinite;
  pointer-events: none;
}
.blackjack-sparkles::after {
  animation-delay: .4s;
  opacity: .8;
}
@keyframes bj-sparkle {
  0% { transform: translateY(6px) scale(0.96); opacity: 0.8; }
  50% { transform: translateY(-4px) scale(1); opacity: 1; }
  100% { transform: translateY(6px) scale(0.96); opacity: 0.8; }
}

/* End of file */